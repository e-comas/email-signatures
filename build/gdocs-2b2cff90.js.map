{"version":3,"file":"gdocs-2b2cff90.js","sources":["../../src/gdocs.js"],"sourcesContent":["// Client ID and API key from the Developer Console\nvar CLIENT_ID =\n  \"574901819149-d46caor3hasi3bsngfua2q20idump433.apps.googleusercontent.com\";\nvar CLIENT_SECRET = \"5wwG1T1fW1hyaClNMG7TSYPM\";\nvar API_KEY = \"AIzaSyDIzIuLKqaQhWXSykVOWOQLqlLggFTDOh8\";\n\n// Array of API discovery doc URLs for APIs used by the quickstart\nvar DISCOVERY_DOCS = [\"https://docs.googleapis.com/$discovery/rest?version=v1\"];\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nvar SCOPES = \"https://www.googleapis.com/auth/documents.readonly\";\n\n/**\n *  On load, called to load the auth2 library and API client library.\n */\nfunction handleClientLoad() {\n  return gapi.load(\"client:auth2\", initClient);\n}\n\n/**\n *  Initializes the API client library and sets up sign-in state\n *  listeners.\n */\nasync function initClient() {\n  while (!(\"client\" in gapi)) await new Promise((d) => setTimeout(d, 0));\n\n  console.log(\"client available\");\n  await gapi.client.init({\n    apiKey: API_KEY,\n    clientId: CLIENT_ID,\n    discoveryDocs: DISCOVERY_DOCS,\n    scope: SCOPES,\n  });\n  console.log(\"client initialized\");\n  // Listen for sign-in state changes.\n  gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\n\n  // Handle the initial sign-in state.\n  updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n}\n\nlet connectStatus,\n  resolveConnectStatus = Function.prototype;\nfunction updateSigninStatus(isSignedIn) {\n  connectStatus = new Promise((resolve) => {\n    resolveConnectStatus(isSignedIn);\n    resolveConnectStatus = resolve;\n  });\n}\nupdateSigninStatus(undefined); // Initialize connection status\nexport async function* subscribeToConnectionStatus() {\n  while (true) {\n    const status = await connectStatus;\n    yield status;\n  }\n}\n\n/**\n *  Sign in the user upon button click.\n */\nexport function connect() {\n  return gapi.auth2.getAuthInstance().signIn();\n}\n\n/**\n *  Sign out the user upon button click.\n */\nexport function disconnect() {\n  return gapi.auth2.getAuthInstance().signOut();\n}\n\n/**\n * Prints the title of a sample doc:\n * https://docs.google.com/document/d/195j9eDD3ccgjQRttHhJPymLJUCOUjs-jmwTrekvdjFE/edit\n */\nfunction printDocTitle() {\n  return gapi.client.docs.documents\n    .get({\n      documentId: \"1jo9ZKaiif5SdYLitw8tmJk8Bis_Zw0GWHkyvndhU7XI\",\n    })\n    .then(\n      function (response) {\n        // debugger;\n        postMessage({ response });\n      },\n      function (response) {\n        console.error(response);\n      }\n    );\n}\n\nimport(\"https://apis.google.com/js/api.js\").then(handleClientLoad);\n"],"names":[],"mappings":";;AAAA;AACA,IAAI,SAAS;AACb,EAAE,0EAA0E,CAAC;AAE7E,IAAI,OAAO,GAAG,yCAAyC,CAAC;AACxD;AACA;AACA,IAAI,cAAc,GAAG,CAAC,wDAAwD,CAAC,CAAC;AAChF;AACA;AACA;AACA,IAAI,MAAM,GAAG,oDAAoD,CAAC;AAClE;AACA;AACA;AACA;AACA,SAAS,gBAAgB,GAAG;AAC5B,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;AAC/C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU,GAAG;AAC5B,EAAE,OAAO,EAAE,QAAQ,IAAI,IAAI,CAAC,EAAE,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACzE;AACA,EAAE,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAClC,EAAE,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;AACzB,IAAI,MAAM,EAAE,OAAO;AACnB,IAAI,QAAQ,EAAE,SAAS;AACvB,IAAI,aAAa,EAAE,cAAc;AACjC,IAAI,KAAK,EAAE,MAAM;AACjB,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;AACpC;AACA,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;AACrE;AACA;AACA,EAAE,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;AACpE,CAAC;AACD;AACA,IAAI,aAAa;AACjB,EAAE,oBAAoB,GAAG,QAAQ,CAAC,SAAS,CAAC;AAC5C,SAAS,kBAAkB,CAAC,UAAU,EAAE;AACxC,EAAE,aAAa,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,KAAK;AAC3C,IAAI,oBAAoB,CAAC,UAAU,CAAC,CAAC;AACrC,IAAI,oBAAoB,GAAG,OAAO,CAAC;AACnC,GAAG,CAAC,CAAC;AACL,CAAC;AACD,kBAAkB,CAAC,SAAS,CAAC,CAAC;AACvB,gBAAgB,2BAA2B,GAAG;AACrD,EAAE,OAAO,IAAI,EAAE;AACf,IAAI,MAAM,MAAM,GAAG,MAAM,aAAa,CAAC;AACvC,IAAI,MAAM,MAAM,CAAC;AACjB,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACO,SAAS,OAAO,GAAG;AAC1B,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC;AAC/C,CAAC;AACD;AACA;AACA;AACA;AACO,SAAS,UAAU,GAAG;AAC7B,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,OAAO,EAAE,CAAC;AAChD,CAAC;AAqBD;AACA,OAAO,mCAAmC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC;;;;"}